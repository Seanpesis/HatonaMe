# מדריך שימוש ב-WhatsApp - HatonaME

## איך זה עובד?

המערכת משתמשת ב-WhatsApp Web כדי לשלוח הזמנות ישירות מה-WhatsApp שלך למוזמנים.

---

## שלב 1: התחברות ל-WhatsApp

### בפעם הראשונה:

1. **הפעל את השרת:**
   ```bash
   npm run dev
   ```

2. **פתח את האתר:**
   - לך ל: `http://localhost:3000`
   - פתח אירוע
   - בחר בטאב **"WhatsApp"**

3. **סרוק QR Code:**
   - תראה QR Code על המסך (או בקונסול)
   - פתח WhatsApp בטלפון שלך
   - לחץ על שלוש הנקודות (⋮) → **"מכשירים מקושרים"** → **"קישור מכשיר"**
   - סרוק את ה-QR Code מהמסך

4. **אימות:**
   - אחרי הסריקה, תראה: **"סטטוס: מחובר"**
   - זה אומר שההתחברות הצליחה!

### בפעם הבאה:

- אם השרת רץ, ההתחברות תהיה אוטומטית
- לא תצטרך לסרוק QR Code שוב (המידע נשמר)

---

## שלב 2: הכנה לשליחה

### לפני ששולחים, ודא ש:

1. ✅ **יש לך הזמנה:**
   - לך לטאב **"הזמנה"**
   - העלה תמונת הזמנה (אופציונלי - אפשר גם בלי)

2. ✅ **יש למוזמנים מספרי טלפון:**
   - לך לטאב **"מוזמנים"**
   - ודא שלכל מוזמן יש מספר טלפון בעמודת "טלפון"
   - אם חסר - עדכן ידנית או הוסף ב-Excel

3. ✅ **WhatsApp מחובר:**
   - לך לטאב **"WhatsApp"**
   - ודא שכתוב: **"סטטוס: מחובר"**

---

## שלב 3: שליחת הזמנות

### אופציה 1: שליחה לכל המוזמנים

1. לך לטאב **"WhatsApp"**
2. לחץ על **"שלח הזמנות לכל המוזמנים"**
3. המערכת תשלח לכל מוזמן שיש לו מספר טלפון

**מה נשלח:**
- הודעה אישית עם שם המוזמן
- טקסט מההזמנה (אם העלית)
- תמונת ההזמנה (אם העלית)
- קישור ל-RSVP אישי

### אופציה 2: שליחה למוזמן ספציפי

(כרגע זה לא זמין בממשק, אבל אפשר להוסיף)

---

## שלב 4: מה המוזמנים מקבלים?

כל מוזמן מקבל הודעה ב-WhatsApp:

```
שלום [שם המוזמן],

אנחנו שמחים להזמין אותך לחתונה שלנו!

[טקסט מההזמנה - אם העלית]

אנא אשר/י הגעה דרך הקישור הבא:
http://localhost:3000/rsvp/[מספר אירוע]/[מספר מוזמן]

תודה!
```

**+ תמונת ההזמנה** (אם העלית)

---

## שלב 5: תשובות RSVP

### איך המוזמנים עונים:

1. המוזמן לוחץ על הקישור בהודעה
2. נפתח דף RSVP בדפדפן
3. המוזמן בוחר:
   - ✅ **"כן, אני מגיע/ה"** או
   - ❌ **"לא, אני לא מגיע/ה"**
4. אם בחר "כן" - מזין כמה אנשים יגיעו
5. לוחץ **"שלח תשובה"**

### איפה רואים את התשובות:

1. לך לטאב **"מוזמנים"**
2. תראה בעמודת **"RSVP"**:
   - 🟡 **"ממתין"** - עדיין לא ענה
   - 🟢 **"מאשר"** - אישר הגעה
   - 🔴 **"מבטל"** - ביטל הגעה
3. בעמודת **"כמות"** תראה כמה אנשים יגיעו

---

## פורמט מספרי טלפון

המערכת תומכת בפורמטים הבאים:

✅ **ישראל:**
- `0501234567`
- `050-123-4567`
- `+972501234567`
- `972501234567`

✅ **אוטומטי:**
- המערכת מוסיפה `972` אוטומטית למספרים ישראליים
- אם המספר מתחיל ב-`0`, היא מחליפה ל-`972`

---

## מעקב אחר הודעות

כל הודעה שנשלחה נשמרת במסד הנתונים:

- לאיזה מוזמן נשלחה
- מה היה התוכן
- מתי נשלחה
- האם הצליחה או נכשלה

---

## פתרון בעיות

### "WhatsApp client is not ready"

**פתרון:**
1. ודא שהשרת רץ
2. לך לטאב WhatsApp
3. סרוק QR Code מחדש

### "Guest phone number is missing"

**פתרון:**
1. לך לטאב "מוזמנים"
2. עדכן מספר טלפון למוזמנים שחסר להם

### הודעה לא נשלחה

**בדוק:**
1. האם המספר טלפון נכון?
2. האם WhatsApp מחובר? (סטטוס: מחובר)
3. בדוק את הקונסול - יש שם פרטים על השגיאה

### QR Code לא מופיע

**פתרון:**
1. בדוק את הקונסול - שם מופיע QR Code
2. או, מחק את התיקייה `server/whatsapp-session` והפעל מחדש

### "מספר לא נמצא ב-WhatsApp"

**פתרון:**
- ודא שהמספר נכון
- ודא שהמספר רשום ב-WhatsApp שלך
- נסה לשלוח הודעה ידנית קודם

---

## טיפים חשובים

1. **גיבוי:**
   - כל הודעות נשמרות במסד הנתונים
   - אפשר לראות מה נשלח ומתי

2. **שליחה הדרגתית:**
   - אפשר לשלוח לקטגוריות ספציפיות (אם תוסיף את התכונה)
   - או לשלוח ידנית למוזמנים בודדים

3. **קישורי RSVP:**
   - כל מוזמן מקבל קישור ייחודי
   - הקישור עובד רק עבור אותו מוזמן

4. **תמונות:**
   - אם העלית תמונת הזמנה, היא תישלח אוטומטית
   - אם לא - רק טקסט יישלח

---

## אבטחה

⚠️ **חשוב לדעת:**
- המערכת משתמשת ב-WhatsApp Web
- זה מחובר ל-WhatsApp שלך
- כל ההודעות נשלחות מה-WhatsApp שלך
- **אל תשתף את הקישור ל-RSVP עם אנשים שלא קיבלו הזמנה!**

---

## סיכום - תהליך מלא

1. ✅ הפעל את השרת
2. ✅ התחבר ל-WhatsApp (סרוק QR Code)
3. ✅ העלה הזמנה (אופציונלי)
4. ✅ ודא שלמוזמנים יש מספרי טלפון
5. ✅ לחץ "שלח הזמנות לכל המוזמנים"
6. ✅ המוזמנים מקבלים הודעה עם קישור
7. ✅ המוזמנים עונים דרך הקישור
8. ✅ רואה את התשובות בטאב "מוזמנים"

---

## שאלות נפוצות

**ש: האם אפשר לשלוח רק למוזמנים מסוימים?**
ת: כרגע רק "לכל המוזמנים", אבל אפשר להוסיף תכונה לשליחה סלקטיבית.

**ש: מה אם מוזמן לא ענה?**
ת: הסטטוס יישאר "ממתין". אפשר לשלוח תזכורת ידנית.

**ש: האם אפשר לשנות את הטקסט של ההודעה?**
ת: כרגע הטקסט קבוע, אבל אפשר להוסיף אפשרות לעריכה.

**ש: האם זה עובד גם מחוץ לישראל?**
ת: כן, אבל צריך לוודא שפורמט המספרים נכון (קוד מדינה + מספר).

---

**עוד שאלות?** בדוק את הקונסול או את הקוד ב-`server/routes/whatsapp.js`

