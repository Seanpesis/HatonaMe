# מידע על מסד הנתונים

## כן, הכל נשמר במסד נתונים SQLite מקומי!

המערכת משתמשת ב-SQLite - מסד נתונים מקומי שנשמר בקובץ `wedding_planner.db` בתיקיית הפרויקט.

## מה נשמר במסד הנתונים:

### 1. **אירועים (Events)**
✅ **נשמר:**
- שם האירוע
- תאריך
- מיקום
- תאריך יצירה ועדכון

**איפה:** `events` table

---

### 2. **מוזמנים (Guests)**
✅ **נשמר:**
- שם המוזמן
- קטגוריה (עבודה שון, עבודה ליפז, וכו')
- מספר טלפון
- מספר שולחן (אחרי סידור)
- סטטוס RSVP (pending/confirmed/declined)
- כמות מוזמנים (מ-Excel או מתשובת RSVP)
- תאריך תשובת RSVP
- הערות

**איפה:** `guests` table

**מתי נשמר:**
- בעת טעינת קובץ Excel
- בעת עדכון פרטי מוזמן
- בעת קבלת תשובת RSVP

---

### 3. **שולחנות (Tables)**
✅ **נשמר:**
- מספר שולחן
- קיבולת שולחן
- קטגוריה של השולחן
- קישור לאירוע

**איפה:** `tables` table

**מתי נשמר:**
- בעת סידור שולחנות אוטומטי
- בעת יצירת שולחן ידני

---

### 4. **הזמנות (Invitations)**
✅ **נשמר:**
- נתיב לקובץ התמונה
- טקסט שהוסף על התמונה
- תאריך יצירה

**איפה:** `invitations` table

**הערה:** התמונה עצמה נשמרת בתיקייה `server/uploads/invitations/`

---

### 5. **הודעות WhatsApp**
✅ **נשמר:**
- איזה אירוע
- לאיזה מוזמן נשלחה
- מספר טלפון
- תוכן ההודעה
- סטטוס (sent/failed)
- תאריך שליחה

**איפה:** `whatsapp_messages` table

**מתי נשמר:**
- כל פעם ששולחים הזמנה ב-WhatsApp

---

### 6. **תשובות RSVP**
✅ **נשמר:**
- סטטוס (confirmed/declined)
- כמות אנשים שמגיעים
- תאריך תשובה

**איפה:** נשמר בטבלת `guests` (עמודות: `rsvp_status`, `rsvp_guests_count`, `rsvp_response_date`)

**מתי נשמר:**
- כשמוזמן עונה דרך דף RSVP
- כשעונים דרך WhatsApp

---

## מיקום הקובץ:

הקובץ `wedding_planner.db` נמצא בתיקיית הפרויקט הראשית.

**חשוב:** הקובץ נוצר אוטומטית בפעם הראשונה שהשרת רץ.

---

## גיבוי:

**מומלץ לגבות את הקובץ `wedding_planner.db` באופן קבוע!**

פשוט העתק את הקובץ למקום בטוח.

---

## מה קורה כשמוחקים אירוע:

בגלל ש-FOREIGN KEY עם `ON DELETE CASCADE`:
- כל המוזמנים של האירוע נמחקים
- כל השולחנות נמחקים
- כל ההזמנות נמחקות
- כל הודעות ה-WhatsApp נמחקות

**זה אומר שכל הנתונים של האירוע נמחקים יחד!**

---

## בדיקת הנתונים:

אפשר לפתוח את הקובץ `wedding_planner.db` עם כלי SQLite כמו:
- DB Browser for SQLite (חינמי)
- SQLiteStudio
- או דרך command line

---

## סיכום:

✅ **כל הנתונים נשמרים במסד הנתונים:**
- אירועים
- מוזמנים (כולל כמות מ-Excel)
- שולחנות
- הזמנות
- הודעות WhatsApp
- תשובות RSVP

✅ **הכל נשמר אוטומטית** - אין צורך לשמור ידנית

✅ **הנתונים נשמרים מקומית** - על המחשב שלך

✅ **הנתונים נשמרים גם אחרי כיבוי השרת** - הקובץ נשאר

